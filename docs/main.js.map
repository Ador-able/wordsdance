{"version":3,"sources":["main.js"],"names":["rndint","x","y","Math","floor","random","rndfloat","getGET","url","search","toString","location","split","u","get","j","decodeURI","DOM_p","p","document","createElement","DOM_i","i","style","display","speed","opacity","transform","innerText","transition","char","GET","animate","p_now","map","body","backgroundColor","ps","length","title","delay","settings","time","setTimeout","size","key","DOM_stage","body_width","window","str","chars","dom","fontSize","innerWidth","documentElement","clientWidth","appendChild","innerHeight","clientHeight"],"mappings":"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","file":"main.js","sourcesContent":["//random functions\r\nfunction rndint(x, y) {\r\n    return Math.floor(x + (y - x + 1) * Math.random());\r\n}\r\nfunction rndfloat(x, y) {\r\n    return x + (y - x) * Math.random();\r\n}\r\n\r\n\r\n// return GET\r\nfunction getGET() {\r\n    var url = location.search.toString();\r\n    var u = url.split(\"?\", 2);\r\n    if(typeof(u[1]) === \"string\"){\r\n        u = u[1].split(\"&\");\r\n        var get = {};\r\n        for(var i in u) {\r\n            var j = u[i].split(\"=\");\r\n            get[j[0]] = decodeURI(j[1]);\r\n        }\r\n        return get;\r\n    }\r\n    else\r\n        return {};\r\n}\r\n\r\n\r\n//return default DOM\r\nfunction DOM_p() {\r\n    let p = document.createElement(\"p\");\r\n    return p;\r\n}\r\nfunction DOM_i(char, speed) {\r\n    let i = document.createElement(\"i\");\r\n    i.style.display = 'inline-block';\r\n    i.style.opacity = 0;\r\n    i.style.transform = `\r\n        translate(${rndint(-500,500)}%,${rndint(-500,500)}%)\r\n        scale(${rndfloat(0,2)})\r\n        rotate3d(${Math.random()}, ${Math.random()}, ${Math.random()}, ${rndint(-180,180)}deg)\r\n    `;\r\n    i.innerText = char;\r\n\r\n    switch(speed) {\r\n        case 'fast':\r\n            i.style.transition = `${rndint(400,600)}ms ${rndint(0,150)}ms`;\r\n            break;\r\n        case 'normal': default:\r\n            i.style.transition = `${rndint(1000,2000)}ms ${rndint(0,300)}ms`;\r\n            break;\r\n        case 'slow':\r\n            i.style.transition = `${rndint(2000,4000)}ms ${rndint(0,500)}ms`;\r\n    }\r\n\r\n    return i;\r\n}\r\n\r\n\r\n\r\n//////////////////////////////////////////////////\r\n\r\n// 1. init DOM\r\nconst GET = getGET();\r\nlet ps = [];\r\nlet settings = {\r\n    time: 5000,\r\n    size: 4,\r\n    speed: 'slow'\r\n};\r\n\r\nfor(let key in GET) {\r\n    if(parseInt(key)==key)\r\n        ps[key] = GET[key];\r\n    else\r\n        settings[key] = GET[key];\r\n}\r\n\r\nif(!ps.length) {\r\n    ps = ['尽然没有设定显示内容 >.<', 'https://github.com/h2y/wordsdance'];\r\n    settings.size = 3;\r\n}\r\n\r\nlet DOM_stage = document.getElementById('stage'),\r\n    body_width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\r\n    body_height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\r\nps = ps.map((str, i)=>{\r\n    let p = DOM_p();\r\n\r\n    let chars = str.split('');\r\n\r\n    chars = chars.map( (char)=>{\r\n        let dom = DOM_i(char, settings.speed),\r\n            size = settings['size'+i] || settings.size;\r\n        dom.style.fontSize = size + 'rem';\r\n\r\n        p.appendChild( dom );\r\n        return dom;\r\n    } );\r\n\r\n    DOM_stage.appendChild(p);\r\n\r\n    return chars;\r\n});\r\n\r\n\r\n//2.animate\r\n//  a.hide p_now  b.p_now++  c.p_now show  d.interval\r\nlet p_now = -1;\r\nanimate();\r\nfunction animate() {\r\n    //a\r\n    if(p_now != -1) {\r\n        ps[p_now].map((i)=>{\r\n            i.style.transform = `\r\n                translate(${rndint(-500,500)}%,${rndint(-500,500)}%)\r\n                scale(${rndfloat(0,2)})\r\n                rotate3d(${Math.random()}, ${Math.random()}, ${Math.random()}, ${rndint(-180,180)}deg)\r\n            `;\r\n            i.style.opacity = 0;\r\n        });\r\n    }\r\n\r\n    //b\r\n    do {\r\n        if(++p_now >= ps.length)\r\n            p_now = 0;\r\n    } while(!ps[p_now]);\r\n\r\n    //c\r\n    ps[p_now].map((i)=>{\r\n        i.style.opacity = 1;\r\n        i.style.transform = 'none';\r\n    });\r\n\r\n    //背景变色\r\n    document.body.style.backgroundColor = `hsl(${rndint(0,359)},40%,40%)`;\r\n\r\n    //d\r\n    let delay = settings['time'+p_now] || settings.time;\r\n    setTimeout(animate, delay);\r\n}\r\n\r\n\r\ndocument.title = 'wordsdance';\r\n"],"sourceRoot":"/source/"}